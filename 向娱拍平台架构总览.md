# å‘å¨±æ‹å¹³å°ï¼ˆXiangYuPaiï¼‰å¾®æœåŠ¡æ¶æ„æ€»è§ˆ

## ğŸ“Œ å¹³å°ç®€ä»‹

å‘å¨±æ‹æ˜¯ä¸€ä¸ªåŸºäº Spring Cloud çš„**æœåŠ¡äº¤æ˜“æ’®åˆå¹³å°**ï¼Œè¿æ¥æœåŠ¡æä¾›è€…ï¼ˆé™ªç»ƒ/æ•™ç»ƒï¼‰ä¸å®¢æˆ·ï¼Œæä¾›çº¿ä¸Šæ¸¸æˆé™ªç©ã€çº¿ä¸‹æœ¬åœ°æœåŠ¡ï¼ˆå°çƒã€å¥èº«ç­‰ï¼‰çš„é¢„è®¢äº¤æ˜“ï¼Œå¹¶é™„å¸¦ç¤¾äº¤äº’åŠ¨åŠŸèƒ½ã€‚

### æ ¸å¿ƒå•†ä¸šæ¨¡å¼

**å¹³å°å®šä½**ï¼šæœåŠ¡äº¤æ˜“å¹³å° + ç¤¾äº¤äº’åŠ¨ + é—¨åº—åˆä½œ

**ä¸šåŠ¡æ¨¡å¼**ï¼ˆä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼‰ï¼š
1. **çº¿ä¸‹é™ªç©æœåŠ¡**ï¼ˆæ ¸å¿ƒä¸šåŠ¡ï¼‰ï¼š
   - å°çƒé™ªç»ƒã€æ¡Œæ¸¸é™ªç©ã€å‰§æœ¬æ€ç­‰é«˜å®¢å•ä»·é¡¹ç›®
   - ä¸çº¿ä¸‹é—¨åº—æ·±åº¦åˆä½œï¼ˆå°çƒå…ã€æ¡Œæ¸¸å§ã€å‰§æœ¬æ€åº—ç­‰ï¼‰
   - åœ¨åˆä½œé—¨åº—å†…æ¨å¹¿å¹³å°ï¼Œå¸å¼•åˆ°åº—å®¢æˆ·ä½¿ç”¨
   - æŒ‰å°æ—¶/æŒ‰åœºæ¬¡è®¡è´¹ï¼Œå®¢å•ä»·é«˜ï¼ˆ50-200å…ƒ/å°æ—¶ï¼‰
2. **çº¿ä¸Šæ¸¸æˆé™ªç©**ï¼ˆè¡¥å……ä¸šåŠ¡ï¼‰ï¼š
   - ç‹è€…è£è€€ã€è‹±é›„è”ç›Ÿç­‰æ¸¸æˆé™ªç©
   - æŒ‰å°æ—¶è®¡è´¹ï¼Œå®¢å•ä»·è¾ƒä½ï¼ˆ10-50å…ƒ/å°æ—¶ï¼‰
3. **é—¨åº—åˆä½œæ¨¡å¼**ï¼ˆæ ¸å¿ƒæ¸ é“ï¼‰ï¼š
   - ä¸å¤šå®¶çº¿ä¸‹é—¨åº—åˆä½œï¼ˆå‡è®¾åˆæœŸ3å®¶è‡ªè¥é—¨åº—ï¼‰
   - åœ¨é—¨åº—å†…å±•ç¤ºåº”ç”¨ï¼Œå¼•å¯¼å®¢æˆ·ä¸‹è½½ä½¿ç”¨
   - é—¨åº—å‘˜å·¥/å¸¸é©»é™ªç»ƒä½œä¸ºæœåŠ¡æä¾›è€…
4. **æ”¶å…¥æ¥æº**ï¼š
   - **äº¤æ˜“æ‰‹ç»­è´¹**ï¼šæ¯ç¬”è®¢å•æŠ½æˆ 10-20%ï¼ˆä¸»è¦æ”¶å…¥ï¼‰
   - **é‡‘å¸å……å€¼**ï¼šå¹³å°è™šæ‹Ÿè´§å¸ï¼Œ1å…ƒ = 10é‡‘å¸
   - **å¢å€¼æœåŠ¡**ï¼šè®¤è¯è´¹ã€æ¨èä½ã€VIPä¼šå‘˜ç­‰

**ç”¨æˆ·è§’è‰²**ï¼š
1. **å®¢æˆ·ï¼ˆæ¶ˆè´¹è€…ï¼‰**ï¼š
   - æµè§ˆæœåŠ¡æä¾›è€…ï¼Œç­›é€‰å¿ƒä»ªçš„é™ªç»ƒ/æ•™ç»ƒ
   - å……å€¼é‡‘å¸ï¼Œä¸‹å•è´­ä¹°æœåŠ¡
   - å¯¹æœåŠ¡æä¾›è€…ç‚¹èµã€è¯„è®ºã€æ”¶è—
   - æŸ¥çœ‹æœåŠ¡è®°å½•ã€å‚ä¸ç¤¾äº¤äº’åŠ¨
2. **æœåŠ¡æä¾›è€…ï¼ˆé™ªç»ƒ/æ•™ç»ƒï¼‰**ï¼š
   - å‘å¸ƒä¸ªäººæŠ€èƒ½ã€è®¾ç½®æœåŠ¡ä»·æ ¼
   - æ¥æ”¶è®¢å•ï¼Œæä¾›çº¿ä¸Š/çº¿ä¸‹æœåŠ¡
   - é€šè¿‡å¹³å°è·å®¢ï¼Œæå‡æ”¶å…¥
   - æç°é‡‘å¸åˆ°é“¶è¡Œè´¦æˆ·
3. **é—¨åº—åˆä½œæ–¹**ï¼š
   - æä¾›åœºåœ°å’Œè®¾æ–½
   - åœ¨é—¨åº—å†…æ¨å¹¿å¹³å°
   - è·å¾—å®¢æµå’Œå¢å€¼æœåŠ¡æ”¶å…¥åˆ†æˆ

**å…¸å‹äº¤æ˜“æµç¨‹**ï¼š
```
æ­¥éª¤1: å®¢æˆ·åˆ°åº—ï¼ˆæˆ–çº¿ä¸Šï¼‰ â†’ æ‰“å¼€å‘å¨±æ‹APP
æ­¥éª¤2: æµè§ˆé™„è¿‘çš„æœåŠ¡æä¾›è€… â†’ ç­›é€‰æŠ€èƒ½/ä»·æ ¼/è¯„ä»·
æ­¥éª¤3: é€‰æ‹©å¿ƒä»ªçš„é™ªç»ƒ â†’ æŸ¥çœ‹è¯¦æƒ…ï¼ˆæŠ€èƒ½ã€ä»·æ ¼ã€è¯„ä»·ï¼‰
æ­¥éª¤4: ä¸‹å•å¹¶æ”¯ä»˜é‡‘å¸ â†’ æœåŠ¡æä¾›è€…æ”¶åˆ°é€šçŸ¥
æ­¥éª¤5: æœåŠ¡æä¾›è€…æ¥å• â†’ çº¿ä¸‹åˆ°åº—/çº¿ä¸Šå¼€å±€
æ­¥éª¤6: æä¾›æœåŠ¡ï¼ˆå°çƒé™ªç»ƒ2å°æ—¶ï¼Œ100é‡‘å¸ï¼‰
æ­¥éª¤7: å®¢æˆ·ç¡®è®¤æœåŠ¡å®Œæˆ â†’ è¯„ä»·æ‰“åˆ†
æ­¥éª¤8: å¹³å°æŠ½å–æ‰‹ç»­è´¹15% â†’ æœåŠ¡æä¾›è€…è·å¾—85é‡‘å¸
æ­¥éª¤9: æœåŠ¡æä¾›è€…å¯æç°åˆ°é“¶è¡Œå¡
```

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### å¾®æœåŠ¡æ¨¡å—æ€»è§ˆï¼ˆ3å±‚æ¶æ„ï¼‰

#### èšåˆæœåŠ¡å±‚ï¼ˆBFF - Backend For Frontendï¼‰
| æ¨¡å— | ç«¯å£ | èŒè´£ | æ•°æ®åº“ | å…³é”®ç‰¹æ€§ |
|------|-----|------|--------|---------|
| **xypai-app-bff** | 9400 | Appç«¯ä¸šåŠ¡ç¼–æ’ | âŒ æ— ï¼ˆçº¯èšåˆï¼‰ | é¦–é¡µæ¨èã€æ•°æ®èšåˆã€æ¨èç®—æ³• |

#### é¢†åŸŸæœåŠ¡å±‚ï¼ˆDomain Servicesï¼‰
| æ¨¡å— | ç«¯å£ | èŒè´£ | æ•°æ®åº“ | å…³é”®ç‰¹æ€§ |
|------|-----|------|--------|---------|
| **xypai-user** | 9401 | ç”¨æˆ·æœåŠ¡ | xypai_userï¼ˆ9è¡¨ï¼‰ | ç”¨æˆ·èµ„æ–™ã€ç¤¾äº¤å…³ç³»ã€æŠ€èƒ½å¸‚åœº |
| **xypai-content** | 9403 | å†…å®¹æœåŠ¡ | xypai_contentï¼ˆ9è¡¨ï¼‰ | Feedæµã€è¯„è®ºã€è¯é¢˜ã€äº’åŠ¨ |
| **xypai-chat** | 9404 | èŠå¤©æœåŠ¡ | xypai_chatï¼ˆ2è¡¨ï¼‰ | å³æ—¶é€šè®¯ã€WebSocketæ¨é€ |
| **xypai-order** | 9405 | è®¢å•æœåŠ¡ | xypai_orderï¼ˆ1è¡¨ï¼‰ | è®¢å•ç®¡ç†ã€çŠ¶æ€æµè½¬ |
| **xypai-payment** | 9406 | æ”¯ä»˜æœåŠ¡ | xypai_paymentï¼ˆ3è¡¨ï¼‰ | æ”¯ä»˜å¤„ç†ã€ä½™é¢ç®¡ç† |
| **xypai-common** | 9407 | é€šç”¨æœåŠ¡ | xypai_commonï¼ˆ7è¡¨ï¼‰ | ä½ç½®ã€åª’ä½“ã€é€šçŸ¥ã€ä¸¾æŠ¥ï¼ˆ4åˆ1ï¼‰ |

#### åŸºç¡€è®¾æ–½å±‚ï¼ˆInfrastructure Servicesï¼‰
| æ¨¡å— | ç«¯å£ | èŒè´£ | æ•°æ®åº“ | å…³é”®ç‰¹æ€§ |
|------|-----|------|--------|---------|
| **xypai-auth** | 8200 | è®¤è¯æˆæƒ | âŒ æ—  | SMS/å¯†ç ç™»å½•ã€Tokenç®¡ç† |

**æ€»è®¡**ï¼š1 ä¸ªèšåˆå±‚ + 6 ä¸ªé¢†åŸŸæœåŠ¡ + 1 ä¸ªåŸºç¡€è®¾æ–½æœåŠ¡ | 5 ä¸ªæ•°æ®åº“ | 31 å¼ æ•°æ®è¡¨

### æœåŠ¡åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      App å®¢æˆ·ç«¯ / Web                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ REST API / WebSocket
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API Gateway (8080)                  â”‚
â”‚                   (Spring Cloud Gateway)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“              â†“               â†“               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ èšåˆæœåŠ¡å±‚    â”‚  â”‚ åŸºç¡€è®¾æ–½å±‚    â”‚  â”‚ é¢†åŸŸæœåŠ¡å±‚    â”‚  â”‚ é¢†åŸŸæœåŠ¡å±‚    â”‚
â”‚              â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚
â”‚xypai-app-bff â”‚  â”‚ xypai-auth   â”‚  â”‚ xypai-user   â”‚  â”‚ xypai-common â”‚
â”‚ (9400)       â”‚  â”‚ (8200)       â”‚  â”‚ xypai-contentâ”‚  â”‚ (9407)       â”‚
â”‚âŒ æ— æ•°æ®åº“    â”‚  â”‚âŒ æ— æ•°æ®åº“    â”‚  â”‚ xypai-chat   â”‚  â”‚ (4ä¸ªå­æœåŠ¡)   â”‚
â”‚              â”‚  â”‚              â”‚  â”‚ xypai-order  â”‚  â”‚              â”‚
â”‚              â”‚  â”‚              â”‚  â”‚ xypai-paymentâ”‚  â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                    â”‚
       â”‚ Dubbo RPC                          â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“              â†“                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MySQL        â”‚  â”‚ Redis        â”‚  â”‚ OSS          â”‚
â”‚ (5ä¸ªæ•°æ®åº“)   â”‚  â”‚ (ç¼“å­˜+é˜Ÿåˆ—)   â”‚  â”‚ (æ–‡ä»¶å­˜å‚¨)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æœåŠ¡ä¾èµ–å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 xypai-app-bff                    â”‚
â”‚           (BFF èšåˆå±‚ï¼Œæ— æ•°æ®åº“)                   â”‚
â”‚   åŠŸèƒ½ï¼šé¦–é¡µæ¨èã€æ•°æ®èšåˆã€æ¨èç®—æ³•                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ Dubbo RPC è°ƒç”¨
    â”Œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“     â†“             â†“             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚xypai-  â”‚ â”‚xypai-   â”‚ â”‚xypai-   â”‚ â”‚xypai-   â”‚
â”‚user    â”‚ â”‚content  â”‚ â”‚order    â”‚ â”‚payment  â”‚
â”‚        â”‚ â”‚         â”‚ â”‚         â”‚ â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   xypai-auth                     â”‚
â”‚              (è®¤è¯æœåŠ¡ï¼Œæ— æ•°æ®åº“)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ Dubbo RPC è°ƒç”¨
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   xypai-user                     â”‚
â”‚        (ç”¨æˆ·æœåŠ¡ï¼Œæä¾›ç”¨æˆ·æ•°æ® RPC æ¥å£)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  xypai-content                   â”‚
â”‚         (å†…å®¹æœåŠ¡ï¼ŒFeedæµ+è¯„è®º+äº’åŠ¨)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   xypai-chat                     â”‚
â”‚        (èŠå¤©æœåŠ¡ï¼ŒWebSocket å®æ—¶é€šè®¯)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  xypai-order                     â”‚
â”‚              (è®¢å•æœåŠ¡ï¼Œè®¢å•çŠ¶æ€æœº)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ Dubbo RPC è°ƒç”¨
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 xypai-payment                    â”‚
â”‚         (æ”¯ä»˜æœåŠ¡ï¼Œæ”¯ä»˜å¤„ç†+ä½™é¢ç®¡ç†)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  xypai-common                    â”‚
â”‚    (é€šç”¨æœåŠ¡ï¼šä½ç½®+åª’ä½“+é€šçŸ¥+ä¸¾æŠ¥ï¼Œ4åˆ1)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¦‚è§ˆ

### 0. ä¸šåŠ¡èšåˆå±‚ï¼ˆxypai-app-bffï¼‰â­ æ–°å¢
- **é¦–é¡µFeedæµ**ï¼šç”¨æˆ·æ¨èèšåˆï¼ˆçº¿ä¸Š/çº¿ä¸‹ Tabï¼‰
  - èšåˆæ•°æ®æºï¼šxypai-userï¼ˆç”¨æˆ·ä¿¡æ¯+æŠ€èƒ½ï¼‰ + xypai-contentï¼ˆåŠ¨æ€æ•°ï¼‰
  - æ¨èç®—æ³•ï¼šè·ç¦»è®¡ç®— + æŠ€èƒ½åŒ¹é… + æ´»è·ƒåº¦è¯„åˆ†
  - Redis ç¼“å­˜ï¼šæ¨èç»“æœç¼“å­˜ 5 åˆ†é’Ÿ
- **æ•°æ®èšåˆæ¨¡å¼**ï¼š
  - æ‰¹é‡ RPC è°ƒç”¨ï¼šå‡å°‘ç½‘ç»œå¾€è¿”æ¬¡æ•°ï¼ˆn â†’ 1ï¼‰
  - æ•°æ®è£å‰ªï¼šæ ¹æ®åœºæ™¯è¿”å›æœ€å°æ•°æ®é›†
  - å‰ç«¯è¯·æ±‚ç®€åŒ–ï¼šä¸€æ¬¡ HTTP è¯·æ±‚è·å–å®Œæ•´æ•°æ®
- **çŠ¶æ€**ï¼šâœ… å·²å®ç°æ¡†æ¶ï¼Œâ³ å¾…å®ç° RPC èšåˆé€»è¾‘

### 1. è®¤è¯æˆæƒï¼ˆxypai-authï¼‰
- SMS éªŒè¯ç ç™»å½• + è‡ªåŠ¨æ³¨å†Œ
- å¯†ç ç™»å½•ï¼ˆæ‰‹æœºå·/é‚®ç®±ï¼‰
- å¿˜è®°å¯†ç ã€æ”¯ä»˜å¯†ç ç®¡ç†
- JWT Token ç­¾å‘ã€åˆ·æ–°ã€ç™»å‡º

### 2. ç”¨æˆ·ç®¡ç†ï¼ˆxypai-userï¼‰
- **ç”¨æˆ·èµ„æ–™**ï¼š11 ä¸ªå¯ç¼–è¾‘å­—æ®µ + 8 ä¸ª JSON æ‰©å±•å­—æ®µ
- **ç¤¾äº¤å…³ç³»**ï¼šå…³æ³¨/å–å…³ã€ç²‰ä¸åˆ—è¡¨ã€æ‹‰é»‘ã€ä¸¾æŠ¥
- **æŠ€èƒ½å¸‚åœº**ï¼š
  - çº¿ä¸ŠæŠ€èƒ½ï¼šæ¸¸æˆé™ªç©ï¼ˆç‹è€…è£è€€ã€åƒé¸¡ç­‰ï¼‰
  - çº¿ä¸‹æŠ€èƒ½ï¼šæœ¬åœ°æœåŠ¡ï¼ˆç©ºé—´æŸ¥è¯¢ï¼‰
- **RPC æœåŠ¡**ï¼šä¸ºè®¤è¯æœåŠ¡æä¾›ç”¨æˆ·æ•°æ®

### 3. å†…å®¹ç¤¾åŒºï¼ˆxypai-contentï¼‰
- **Feed æµ**ï¼šå…³æ³¨ Tab + çƒ­é—¨ Tab + åŒåŸ Tab
- **è¯„è®ºç³»ç»Ÿ**ï¼šä¸€çº§è¯„è®º + äºŒçº§å›å¤ + ç½®é¡¶
- **è¯é¢˜ç®¡ç†**ï¼šçƒ­é—¨è¯é¢˜ã€è¯é¢˜å…³è”ï¼ˆæœ€å¤š5ä¸ªï¼‰
- **äº’åŠ¨åŠŸèƒ½**ï¼šç‚¹èµã€æ”¶è—ã€åˆ†äº« + å®æ—¶ç»Ÿè®¡
- **å†…å®¹ä¸¾æŠ¥**ï¼šä¸¾æŠ¥å®¡æ ¸æµç¨‹

### 4. å³æ—¶é€šè®¯ï¼ˆxypai-chatï¼‰
- **ç§èŠæ¶ˆæ¯**ï¼šä¸€å¯¹ä¸€èŠå¤©
- **å¤šæ ¼å¼æ¶ˆæ¯**ï¼šæ–‡å­—ã€å›¾ç‰‡ã€è¯­éŸ³ã€è§†é¢‘
- **WebSocket æ¨é€**ï¼šå®æ—¶æ¶ˆæ¯ã€åœ¨çº¿çŠ¶æ€
- **æ¶ˆæ¯ç®¡ç†**ï¼šå·²è¯»å›æ‰§ã€æ¶ˆæ¯æ’¤å›ï¼ˆ2åˆ†é’Ÿï¼‰
- **ä¼šè¯åˆ—è¡¨**ï¼šæœªè¯»ç»Ÿè®¡ã€æœ€åæ¶ˆæ¯é¢„è§ˆ

### 5. è®¢å•ç®¡ç†ï¼ˆxypai-orderï¼‰
- **è®¢å•åˆ›å»º**ï¼šæŠ€èƒ½æœåŠ¡è®¢å• + æ´»åŠ¨è®¢å•
- **çŠ¶æ€æµè½¬**ï¼šå¾…æ”¯ä»˜ â†’ å¾…æœåŠ¡ â†’ è¿›è¡Œä¸­ â†’ å¾…è¯„ä»· â†’ å·²å®Œæˆ
- **è®¢å•æ“ä½œ**ï¼šå–æ¶ˆã€ç¡®è®¤å®Œæˆã€ç”³è¯·é€€æ¬¾ã€è¯„ä»·
- **è¶…æ—¶å¤„ç†**ï¼š30 åˆ†é’Ÿæœªæ”¯ä»˜è‡ªåŠ¨å–æ¶ˆ

### 6. æ”¯ä»˜å¤„ç†ï¼ˆxypai-paymentï¼‰
- **æ”¯ä»˜æ–¹å¼**ï¼šä½™é¢æ”¯ä»˜ã€æ”¯ä»˜å®ã€å¾®ä¿¡æ”¯ä»˜
- **ä½™é¢ç®¡ç†**ï¼šå……å€¼ã€æç°ã€ä½™é¢å†»ç»“/è§£å†»
- **æ”¯ä»˜å¯†ç **ï¼š6 ä½æ•°å­— + é”™è¯¯ 3 æ¬¡é”å®š 30 åˆ†é’Ÿ
- **é€€æ¬¾å¤„ç†**ï¼šæ”¯æŒé€€æ¬¾åˆ°åŸæ”¯ä»˜æ–¹å¼
- **äº¤æ˜“æµæ°´**ï¼šå®Œæ•´çš„äº¤æ˜“è®°å½•

### 7. é€šç”¨æœåŠ¡ï¼ˆxypai-commonï¼Œ4 åˆ 1ï¼‰
- **ä½ç½®æœåŠ¡**ï¼šåŸå¸‚åˆ—è¡¨ã€é™„è¿‘åœ°ç‚¹æŸ¥è¯¢ï¼ˆHaversine ç®—æ³•ï¼‰
- **åª’ä½“ä¸Šä¼ **ï¼šå›¾ç‰‡/è§†é¢‘ä¸Šä¼  + MD5 ç§’ä¼ 
- **é€šçŸ¥ç³»ç»Ÿ**ï¼šç³»ç»Ÿé€šçŸ¥ + æœªè¯»ç»Ÿè®¡
- **ä¸¾æŠ¥å®¡æ ¸**ï¼šç”¨æˆ·ä¸¾æŠ¥ + ç®¡ç†å‘˜å®¡æ ¸ + å¤„ç½šè®°å½•

## ğŸ’¾ æ•°æ®åº“æ¦‚è§ˆ

### æ•°æ®åº“åˆ†å¸ƒï¼ˆ5 ä¸ªç‹¬ç«‹æ•°æ®åº“ï¼‰

| æ•°æ®åº“ | è¡¨æ•°é‡ | ä¸»è¦è¡¨ | ç‰¹ç‚¹ |
|--------|-------|--------|------|
| **xypai_user** | 9 å¼  | xy_user, user_stats, skill | ç”¨æˆ·ä¸»è¡¨ 33 å­—æ®µ + 8 ä¸ª JSON æ‰©å±• |
| **xypai_content** | 9 å¼  | feed, comment, like, topic | Feed æµ + è¯„è®ºæ ‘å½¢ç»“æ„ |
| **xypai_chat** | 2 å¼  | conversation, message | æç®€è®¾è®¡ï¼Œä»… 2 å¼ è¡¨ |
| **xypai_order** | 1 å¼  | order | æœ€ç²¾ç®€ï¼Œä»… 1 å¼ è¡¨ |
| **xypai_payment** | 3 å¼  | payment, account, transaction | æ”¯ä»˜ + è´¦æˆ· + æµæ°´ |
| **xypai_common** | 7 å¼  | location, media_file, notification, report | 4 ä¸ªå­æœåŠ¡å…±ç”¨ |

**æ€»è®¡**ï¼š31 å¼ è¡¨

### æ•°æ®åº“æ–‡ä»¶ä½ç½®æ˜ å°„

| æœåŠ¡æ¨¡å— | ç«¯å£ | æ•°æ®åº“å | SQL æ–‡ä»¶è·¯å¾„ | çŠ¶æ€ |
|---------|------|---------|-------------|------|
| **xypai-app-bff** | 9400 | âŒ æ—  | - | âœ… æ— éœ€æ•°æ®åº“ |
| **xypai-user** | 9401 | xypai_user | `./xypai-modules/xypai-user/sql/xypai_user.sql` | âœ… å·²åˆ›å»º |
| **xypai-content** | 9403 | xypai_content | `./xypai-modules/xypai-content/sql/xypai_content.sql` | âœ… å·²åˆ›å»º |
| **xypai-chat** | 9404 | xypai_chat | `./xypai-modules/xypai-chat/sql/xypai_chat.sql` | â³ å¾…åˆ›å»º |
| **xypai-order** | 9405 | xypai_order | `./xypai-modules/xypai-order/sql/xypai_order.sql` | â³ å¾…åˆ›å»º |
| **xypai-payment** | 9406 | xypai_payment | `./xypai-modules/xypai-payment/sql/xypai_payment.sql` | â³ å¾…åˆ›å»º |
| **xypai-common** | 9407 | xypai_common | `./xypai-common/sql/xypai_common.sql` | â³ å¾…åˆ›å»º |
| **xypai-auth** | 8200 | âŒ æ—  | - | âœ… æ— éœ€æ•°æ®åº“ |

> **æ³¨æ„**: xypai-common æ˜¯ç‹¬ç«‹ç›®å½•ï¼Œä¸åœ¨ xypai-modules ä¸‹

### è¡¨æ•°é‡åˆ†å¸ƒ
```
xypai_user     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 9 å¼ 
xypai_content  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 9 å¼ 
xypai_common   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   7 å¼ 
xypai_payment  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ       3 å¼ 
xypai_chat     â–ˆâ–ˆâ–ˆ         2 å¼ 
xypai_order    â–ˆ           1 å¼ 
```

## ğŸ”§ æŠ€æœ¯æ ˆæ€»è§ˆ

### æ ¸å¿ƒæ¡†æ¶
```yaml
åŸºç¡€æ¡†æ¶:
  - Spring Boot: 3.2.0
  - Spring Cloud: 2023.x
  - Spring Cloud Alibaba: 2022.x

æŒä¹…å±‚:
  - MyBatis Plus: 3.5.7 (æ—  XML å¼€å‘)
  - MySQL: 8.0+

æœåŠ¡æ²»ç†:
  - Nacos: 2.x (æ³¨å†Œä¸­å¿ƒ + é…ç½®ä¸­å¿ƒ)
  - Dubbo: 3.x (RPC æ¡†æ¶)
  - Seata: åˆ†å¸ƒå¼äº‹åŠ¡

è®¤è¯æˆæƒ:
  - Sa-Token: æœ€æ–°ç‰ˆ (JWT + æƒé™æ§åˆ¶)

ç¼“å­˜:
  - Redis: 7.0+ (ç¼“å­˜ + åˆ†å¸ƒå¼é” + å»¶æ—¶é˜Ÿåˆ—)

é€šè®¯:
  - Spring WebSocket: å®æ—¶æ¨é€ (ä»… xypai-chat)

å­˜å‚¨:
  - OSS: å¯¹è±¡å­˜å‚¨ (å›¾ç‰‡/è§†é¢‘/è¯­éŸ³)

æœç´¢:
  - Elasticsearch: å¯é€‰ (Feed å†…å®¹å…¨æ–‡æœç´¢)

ç›‘æ§:
  - Prometheus: å¯é€‰
  - Skywalking: å¯é€‰
```

### æŠ€æœ¯ç‰¹æ€§å¯¹æ¯”

| ç‰¹æ€§ | ä½¿ç”¨æ¨¡å— | è¯´æ˜ |
|------|---------|------|
| **Dubbo RPC** | auth â†’ user, order â†’ payment | æœåŠ¡é—´è°ƒç”¨ |
| **WebSocket** | chat | å”¯ä¸€ä½¿ç”¨ WebSocket çš„æ¨¡å— |
| **Seata åˆ†å¸ƒå¼äº‹åŠ¡** | order, payment | è®¢å•+æ”¯ä»˜å¼ºä¸€è‡´æ€§ |
| **Elasticsearch** | content | å¯é€‰ï¼ŒFeed å…¨æ–‡æœç´¢ |
| **çŠ¶æ€æœº** | order | è®¢å•çŠ¶æ€ä¸¥æ ¼æµè½¬ |
| **ç©ºé—´æŸ¥è¯¢** | user, common | Haversine ç®—æ³• + ç©ºé—´ç´¢å¼• |
| **MD5 ç§’ä¼ ** | common | åª’ä½“æ–‡ä»¶å»é‡ |

## ğŸš€ å¿«é€Ÿå¯åŠ¨æŒ‡å—

### 1. åŸºç¡€è®¾æ–½å¯åŠ¨ï¼ˆDocker Composeï¼‰

```bash
# å¯åŠ¨åŸºç¡€è®¾æ–½
cd docker
docker-compose up -d

# åŒ…å«æœåŠ¡ï¼š
# - MySQL (5ä¸ªæ•°æ®åº“)
# - Redis
# - Nacos
# - Seata (å¯é€‰)
# - Elasticsearch (å¯é€‰)
```

### 2. Nacos é…ç½®ä¸­å¿ƒ

```bash
# è®¿é—® Nacos æ§åˆ¶å°
http://localhost:8848/nacos
# ç”¨æˆ·å/å¯†ç : nacos/nacos

# ä¸Šä¼ é…ç½®æ–‡ä»¶ï¼ˆä½äº script/config/nacos/ï¼‰
1. application-common.yml    # é€šç”¨é…ç½®
2. xypai-app-bff.yml         # BFF èšåˆæœåŠ¡é…ç½®
3. ruoyi-gateway.yml         # Gateway è·¯ç”±é…ç½®
# ... å…¶ä»–æœåŠ¡é…ç½®

# è¯¦ç»†é…ç½®æŒ‡å—ï¼š
# å‚è€ƒ script/config/nacos/XyPaiå¹³å°Nacosé…ç½®æŒ‡å—.md
```

### 3. æ•°æ®åº“åˆå§‹åŒ–

```bash
# å¯¼å…¥æ‰€æœ‰æ•°æ®åº“
mysql -u root -p < xypai-user/sql/xypai_user.sql
mysql -u root -p < xypai-content/sql/xypai_content.sql
mysql -u root -p < xypai-chat/sql/xypai_chat.sql
mysql -u root -p < xypai-common/sql/xypai_common.sql
# xypai-order å’Œ xypai-payment æŒ‰éœ€åˆ›å»º
```

### 4. æœåŠ¡å¯åŠ¨é¡ºåº

```bash
# ç¬¬ 1 æ­¥ï¼šå¯åŠ¨ç”¨æˆ·æœåŠ¡ï¼ˆå¿…é¡»ä¼˜å…ˆï¼Œauth ä¾èµ–å®ƒï¼‰
cd xypai-user && mvn spring-boot:run &

# ç¬¬ 2 æ­¥ï¼šå¯åŠ¨è®¤è¯æœåŠ¡
cd xypai-auth && mvn spring-boot:run &

# ç¬¬ 3 æ­¥ï¼šå¯åŠ¨ BFF èšåˆæœåŠ¡ï¼ˆå¯é€‰ï¼Œç”¨äºä¸šåŠ¡ç¼–æ’ï¼‰
cd xypai-aggregation/xypai-app-bff && mvn spring-boot:run &

# ç¬¬ 4 æ­¥ï¼šå¯åŠ¨å…¶ä»–é¢†åŸŸæœåŠ¡ï¼ˆå¯å¹¶è¡Œï¼‰
cd xypai-content && mvn spring-boot:run &
cd xypai-chat && mvn spring-boot:run &
cd xypai-common && mvn spring-boot:run &

# ç¬¬ 5 æ­¥ï¼šå¯åŠ¨æ”¯ä»˜æœåŠ¡ï¼ˆè®¢å•ä¾èµ–å®ƒï¼‰
cd xypai-payment && mvn spring-boot:run &

# ç¬¬ 6 æ­¥ï¼šå¯åŠ¨è®¢å•æœåŠ¡
cd xypai-order && mvn spring-boot:run &
```

### 5. éªŒè¯æœåŠ¡

```bash
# æ£€æŸ¥ Nacos æ³¨å†Œ
# http://localhost:8848/nacos (nacos/nacos)

# å„æœåŠ¡ Swagger UI
http://localhost:8200/doc.html  # xypai-auth
http://localhost:9400/doc.html  # xypai-app-bff (BFF èšåˆæœåŠ¡)
http://localhost:9401/doc.html  # xypai-user
http://localhost:9403/doc.html  # xypai-content
http://localhost:9404/doc.html  # xypai-chat
http://localhost:9405/doc.html  # xypai-order
http://localhost:9406/doc.html  # xypai-payment
http://localhost:9407/doc.html  # xypai-common
```

## ğŸ“Š å…³é”®æŒ‡æ ‡

### ä»£ç é‡ï¼ˆä¼°ç®—ï¼‰
- **æ€»ä»£ç è¡Œæ•°**ï¼šçº¦ 50,000 è¡Œ
- **Java æ–‡ä»¶æ•°**ï¼šçº¦ 300+ ä¸ª
- **æ¥å£æ•°é‡**ï¼šçº¦ 100+ ä¸ª REST API

### æ€§èƒ½æŒ‡æ ‡
- **QPS**ï¼šå•æœåŠ¡ 1000+ QPSï¼ˆä¼˜åŒ–åï¼‰
- **å“åº”æ—¶é—´**ï¼šP99 < 200ms
- **å¹¶å‘ç”¨æˆ·**ï¼šæ”¯æŒ 10 ä¸‡+ åœ¨çº¿ç”¨æˆ·

### æ•°æ®è§„æ¨¡
- **ç”¨æˆ·è¡¨**ï¼šæ”¯æŒåƒä¸‡çº§ç”¨æˆ·
- **Feed è¡¨**ï¼šæ”¯æŒäº¿çº§åŠ¨æ€
- **æ¶ˆæ¯è¡¨**ï¼šæ”¯æŒäº¿çº§æ¶ˆæ¯è®°å½•

## ğŸ” å®‰å…¨ç‰¹æ€§

1. **è®¤è¯å®‰å…¨**
   - JWT Token + åŒ Token æœºåˆ¶ï¼ˆAccess + Refreshï¼‰
   - Token è‡ªåŠ¨åˆ·æ–° + è¿‡æœŸæ§åˆ¶
   - å•ç‚¹ç™»å½•æ”¯æŒ

2. **æ”¯ä»˜å®‰å…¨**
   - æ”¯ä»˜å¯†ç  BCrypt åŠ å¯†
   - æ”¯ä»˜å¯†ç é”™è¯¯ 3 æ¬¡é”å®š 30 åˆ†é’Ÿ
   - æ”¯ä»˜é˜²é‡ï¼ˆRedis é” + å”¯ä¸€ç´¢å¼•ï¼‰
   - ä½™é¢ä¹è§‚é” + åˆ†å¸ƒå¼äº‹åŠ¡

3. **æ•°æ®å®‰å…¨**
   - æ•æ„Ÿå­—æ®µåŠ å¯†å­˜å‚¨ï¼ˆèº«ä»½è¯å·ï¼‰
   - è½¯åˆ é™¤è®¾è®¡ï¼ˆdeleted å­—æ®µï¼‰
   - æ“ä½œæ—¥å¿—è®°å½•

4. **æ¥å£å®‰å…¨**
   - æ¥å£é™æµï¼ˆRedis + æ³¨è§£ï¼‰
   - æ¥å£å¹‚ç­‰æ€§ï¼ˆé˜²é‡å¤æäº¤ï¼‰
   - ç­¾åéªŒè¯ï¼ˆæ”¯ä»˜å›è°ƒï¼‰

## ğŸ¨ è®¾è®¡äº®ç‚¹

### 1. å¾®æœåŠ¡è®¾è®¡
- **ä¸‰å±‚æ¶æ„**ï¼šèšåˆå±‚ï¼ˆBFFï¼‰ + é¢†åŸŸå±‚ï¼ˆDomainï¼‰ + åŸºç¡€è®¾æ–½å±‚ï¼ˆInfrastructureï¼‰
- **æœåŠ¡æ‹†åˆ†åˆç†**ï¼šæŒ‰ä¸šåŠ¡è¾¹ç•Œæ¸…æ™°æ‹†åˆ†
- **æ•°æ®åº“ç‹¬ç«‹**ï¼šæ¯ä¸ªæœåŠ¡ç‹¬ç«‹æ•°æ®åº“ï¼Œé¿å…è€¦åˆ
- **BFF æ¨¡å¼**ï¼šèšåˆå±‚æ— æ•°æ®åº“ï¼Œé€šè¿‡ Dubbo RPC è°ƒç”¨é¢†åŸŸæœåŠ¡
- **é€šç”¨æœåŠ¡èšåˆ**ï¼šxypai-common 4 åˆ 1ï¼Œé™ä½è¿ç»´æˆæœ¬

### 2. æ•°æ®åº“è®¾è®¡
- **JSON æ‰©å±•å­—æ®µ**ï¼šuser è¡¨ 8 ä¸ª JSON å­—æ®µï¼Œé¿å…é¢‘ç¹ä¿®è¡¨
- **ç©ºé—´ç´¢å¼•**ï¼šæ”¯æŒé™„è¿‘åœ°ç‚¹/æŠ€èƒ½æŸ¥è¯¢
- **ä¹è§‚é”**ï¼šè´¦æˆ·ä½™é¢ã€è®¢å•çŠ¶æ€é˜²å¹¶å‘
- **è½¯åˆ é™¤**ï¼šæ‰€æœ‰è¡¨ä½¿ç”¨ deleted å­—æ®µ

### 3. æ€§èƒ½ä¼˜åŒ–
- **BFF èšåˆä¼˜åŒ–**ï¼šæ‰¹é‡ RPC è°ƒç”¨ï¼Œå‡å°‘ç½‘ç»œå¾€è¿”ï¼ˆn â†’ 1ï¼‰
- **Redis ç¼“å­˜**ï¼šçƒ­ç‚¹æ•°æ®ç¼“å­˜ï¼ˆåŸå¸‚åˆ—è¡¨ã€ä¼šè¯åˆ—è¡¨ã€æ¨èç»“æœï¼‰
- **MD5 ç§’ä¼ **ï¼šæ–‡ä»¶å»é‡ï¼ŒèŠ‚çœå­˜å‚¨
- **åˆ†é¡µåŠ è½½**ï¼šFeed æµã€æ¶ˆæ¯åˆ—è¡¨æ”¯æŒåˆ†é¡µ
- **ç´¢å¼•ä¼˜åŒ–**ï¼šé«˜é¢‘æŸ¥è¯¢å­—æ®µå»ºç«‹ç´¢å¼•

### 4. å¯é æ€§ä¿è¯
- **åˆ†å¸ƒå¼äº‹åŠ¡**ï¼šSeata AT æ¨¡å¼ä¿è¯è®¢å•+æ”¯ä»˜ä¸€è‡´æ€§
- **æ¶ˆæ¯é˜Ÿåˆ—**ï¼šRedis å»¶æ—¶é˜Ÿåˆ—ï¼ˆè®¢å•è¶…æ—¶å–æ¶ˆï¼‰
- **å¹‚ç­‰æ€§è®¾è®¡**ï¼šæ”¯ä»˜å›è°ƒã€è®¢å•åˆ›å»ºé˜²é‡
- **é™æµé™çº§**ï¼šæ¥å£é™æµä¿æŠ¤

## ğŸ“ é¡¹ç›®ç»“æ„

```
RuoYi-Cloud-Plus/
â”œâ”€â”€ xypai-aggregation/       # â­ èšåˆæœåŠ¡å±‚ï¼ˆæ–°å¢ï¼‰
â”‚   â””â”€â”€ xypai-app-bff/       # App ç«¯ä¸šåŠ¡èšåˆæœåŠ¡ï¼ˆ9400ï¼‰
â”œâ”€â”€ xypai-modules/           # é¢†åŸŸæœåŠ¡å±‚
â”‚   â”œâ”€â”€ xypai-user/          # ç”¨æˆ·æœåŠ¡ï¼ˆ9401ï¼‰
â”‚   â”œâ”€â”€ xypai-content/       # å†…å®¹æœåŠ¡ï¼ˆ9403ï¼‰
â”‚   â”œâ”€â”€ xypai-chat/          # èŠå¤©æœåŠ¡ï¼ˆ9404ï¼‰
â”‚   â”œâ”€â”€ xypai-order/         # è®¢å•æœåŠ¡ï¼ˆ9405ï¼‰
â”‚   â”œâ”€â”€ xypai-payment/       # æ”¯ä»˜æœåŠ¡ï¼ˆ9406ï¼‰
â”‚   â””â”€â”€ xypai-common/        # é€šç”¨æœåŠ¡ï¼ˆ9407ï¼‰
â”œâ”€â”€ xypai-auth/              # åŸºç¡€è®¾æ–½å±‚ - è®¤è¯æœåŠ¡ï¼ˆ8200ï¼‰
â”œâ”€â”€ ruoyi-api/               # Dubbo RPC API å®šä¹‰
â”‚   â”œâ”€â”€ xypai-api-appuser/   # ç”¨æˆ· RPC æ¥å£
â”‚   â”œâ”€â”€ xypai-api-common/    # é€šç”¨ RPC æ¥å£
â”‚   â”œâ”€â”€ ruoyi-api-user/      # ç”¨æˆ·é¢†åŸŸ RPCï¼ˆå¾…æ‰©å±•ï¼‰
â”‚   â””â”€â”€ ruoyi-api-content/   # å†…å®¹é¢†åŸŸ RPCï¼ˆå¾…æ‰©å±•ï¼‰
â”œâ”€â”€ ruoyi-common/            # å…¬å…±æ¨¡å—
â”‚   â”œâ”€â”€ ruoyi-common-core/   # æ ¸å¿ƒå·¥å…·
â”‚   â”œâ”€â”€ ruoyi-common-redis/  # Redis å°è£…
â”‚   â”œâ”€â”€ ruoyi-common-dubbo/  # Dubbo RPC å°è£…
â”‚   â””â”€â”€ ...
â”œâ”€â”€ docker/                  # Docker ç¼–æ’
â””â”€â”€ docs/                    # æ–‡æ¡£ç›®å½•
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

### ğŸ“Š å¿«é€Ÿç†è§£æ–‡æ¡£æ¸…å•ï¼ˆ9ä¸ª âœ… å…¨éƒ¨å®Œæˆï¼‰

| å±‚çº§ | æœåŠ¡åç§° | æ–‡æ¡£è·¯å¾„ | ç«¯å£ | æ•°æ®åº“è¡¨ | å®ç°çŠ¶æ€ |
|------|---------|---------|------|---------|---------|
| **èšåˆæœåŠ¡å±‚** | xypai-aggregation | [./xypai-aggregation/å¿«é€Ÿç†è§£.md](./xypai-aggregation/å¿«é€Ÿç†è§£.md) | - | æ—  | âœ… æ¡†æ¶å®Œæˆ |
| **èšåˆæœåŠ¡å±‚** | xypai-app-bff | [./xypai-aggregation/xypai-app-bff/å¿«é€Ÿç†è§£.md](./xypai-aggregation/xypai-app-bff/å¿«é€Ÿç†è§£.md) | 9400 | æ—  | âœ… Mockå®Œæˆ(5æ¨¡å—) |
| **é¢†åŸŸæœåŠ¡å±‚** | xypai-user | [./xypai-modules/xypai-user/å¿«é€Ÿç†è§£.md](./xypai-modules/xypai-user/å¿«é€Ÿç†è§£.md) | 9401 | 9å¼  | âœ… å·²å®Œæˆ |
| **é¢†åŸŸæœåŠ¡å±‚** | xypai-content | [./xypai-modules/xypai-content/å¿«é€Ÿç†è§£.md](./xypai-modules/xypai-content/å¿«é€Ÿç†è§£.md) | 9403 | 9å¼  | âœ… å·²å®Œæˆ |
| **é¢†åŸŸæœåŠ¡å±‚** | xypai-chat | [./xypai-modules/xypai-chat/å¿«é€Ÿç†è§£.md](./xypai-modules/xypai-chat/å¿«é€Ÿç†è§£.md) | 9404 | 2å¼  | ğŸ”œ å¾…å®ç° |
| **é¢†åŸŸæœåŠ¡å±‚** | xypai-order | [./xypai-modules/xypai-order/å¿«é€Ÿç†è§£.md](./xypai-modules/xypai-order/å¿«é€Ÿç†è§£.md) | 9405 | 1å¼  | ğŸ”œ å¾…å®ç° |
| **é¢†åŸŸæœåŠ¡å±‚** | xypai-payment | [./xypai-modules/xypai-payment/å¿«é€Ÿç†è§£.md](./xypai-modules/xypai-payment/å¿«é€Ÿç†è§£.md) | 9406 | 3å¼  | ğŸ”œ å¾…å®ç° |
| **é¢†åŸŸæœåŠ¡å±‚** | xypai-common | [./xypai-common/å¿«é€Ÿç†è§£.md](./xypai-common/å¿«é€Ÿç†è§£.md) | 9407 | 7å¼  | ğŸ”œ å¾…å®ç° |
| **åŸºç¡€è®¾æ–½å±‚** | xypai-auth | [./xypai-auth/å¿«é€Ÿç†è§£.md](./xypai-auth/å¿«é€Ÿç†è§£.md) | 8200 | æ—  | ğŸ”œ å¾…å®ç° |

### ğŸ¯ å¾…å®ç°åŠŸèƒ½

#### xypai-app-bff å·²å®Œæˆæ¨¡å— (Mock)
- [x] é¦–é¡µ Feed æµã€ç­›é€‰ã€é™æ—¶ä¸“äº«ï¼ˆéƒ¨åˆ†RPCå·²é›†æˆï¼‰
- [x] æœç´¢åŠŸèƒ½ï¼ˆåˆå§‹åŒ–ã€è”æƒ³ã€ç»“æœï¼‰
- [x] ç»„å±€ä¸­å¿ƒï¼ˆåˆ—è¡¨ã€è¯¦æƒ…ã€å‘å¸ƒã€æŠ¥åã€æ”¯ä»˜ï¼‰
- [x] æŠ€èƒ½æœåŠ¡ï¼ˆåˆ—è¡¨ã€è¯¦æƒ…ã€è¯„ä»·ï¼‰

#### xypai-app-bff ä¸‹ä¸€æ­¥å·¥ä½œ
- [ ] æŠ€èƒ½æœåŠ¡æ¨¡å— RPC é›†æˆï¼ˆæ¥å…¥ xypai-user çš„ skill æ¥å£ï¼‰
- [ ] ç»„å±€ä¸­å¿ƒæ¨¡å— RPC é›†æˆï¼ˆéœ€æ–°å»º xypai-activity æœåŠ¡æˆ–æ‰©å±• xypai-contentï¼‰
- [ ] é¦–é¡µ Feed æµå®Œæ•´ RPC é›†æˆ
- [ ] å®ç° `RecommendationEngine` æ¨èç®—æ³•
- [ ] æ·»åŠ  Redis ç¼“å­˜å±‚

#### éœ€è¦é¢†åŸŸæœåŠ¡æä¾›çš„ RPC æ¥å£
- [ ] `xypai-user`: æŠ€èƒ½æŸ¥è¯¢æ¥å£ï¼ˆquerySkillList, getSkillDetail, getSkillReviewsï¼‰
- [ ] `xypai-content` æˆ–æ–°æœåŠ¡: ç»„å±€æ´»åŠ¨æ¥å£ï¼ˆactivity CRUDï¼‰
- [ ] `xypai-chat`: åœ¨çº¿çŠ¶æ€æ‰¹é‡æŸ¥è¯¢

### ğŸ“– å…¶ä»–æ–‡æ¡£

**èšåˆæœåŠ¡å±‚**
- [xypai-app-bff å®ç°è¿›åº¦](./xypai-aggregation/xypai-app-bff/å®ç°è¿›åº¦.md)

**å¼€å‘æŒ‡å—**
- [æ¨¡å—æ–‡æ¡£ç¼–å†™æ¨¡æ¿](./xypai-auth/æ¨¡å—æ–‡æ¡£ç¼–å†™æ¨¡æ¿.md)
- [AI æç¤ºè¯æŒ‡å—](./xypai-auth/AIæç¤ºè¯-ç”Ÿæˆå¿«é€Ÿç†è§£æ–‡æ¡£.md)
- [BFF AI æç¤ºè¯](./xypai-aggregation/AIæç¤ºè¯-ç”Ÿæˆå¿«é€Ÿç†è§£æ–‡æ¡£.md)

**é…ç½®ä¸éƒ¨ç½²**
- [XyPaiå¹³å°Nacosé…ç½®æŒ‡å—](./script/config/nacos/XyPaiå¹³å°Nacosé…ç½®æŒ‡å—.md)

## ğŸ¤ å›¢é˜Ÿåä½œ

### å¼€å‘è§„èŒƒ
- **åˆ†æ”¯ç­–ç•¥**ï¼šGit Flowï¼ˆmaster/develop/feature/hotfixï¼‰
- **ä»£ç è§„èŒƒ**ï¼šé˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œ
- **æäº¤è§„èŒƒ**ï¼šConventional Commits
- **æ¥å£æ–‡æ¡£**ï¼šSwagger/Knife4j è‡ªåŠ¨ç”Ÿæˆ

### ç¯å¢ƒè¯´æ˜
- **dev**ï¼šå¼€å‘ç¯å¢ƒï¼ˆæœ¬åœ° + å¼€å‘æœåŠ¡å™¨ï¼‰
- **test**ï¼šæµ‹è¯•ç¯å¢ƒï¼ˆQA æµ‹è¯•ï¼‰
- **uat**ï¼šé¢„å‘å¸ƒç¯å¢ƒï¼ˆç°åº¦å‘å¸ƒï¼‰
- **prod**ï¼šç”Ÿäº§ç¯å¢ƒï¼ˆæ­£å¼çº¿ä¸Šï¼‰

## ğŸ“ è”ç³»æ–¹å¼

- **é¡¹ç›®åœ°å€**ï¼š[GitHub ä»“åº“åœ°å€]
- **æŠ€æœ¯æ–‡æ¡£**ï¼š[æ–‡æ¡£åœ°å€]
- **API æ–‡æ¡£**ï¼šå„æœåŠ¡ Swagger UI
- **é—®é¢˜åé¦ˆ**ï¼š[Issue Tracker]

---

**æœ€åæ›´æ–°**ï¼š2025-11-26
**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.4.0
**é€‚ç”¨ç‰ˆæœ¬**ï¼šRuoYi-Cloud-Plus + XiangYuPai v1.4.0
**æ›´æ–°å†…å®¹**ï¼š
- **xypai-app-bff æ¨¡å—å¤§å¹…æ‰©å±•**ï¼šæ–°å¢ç»„å±€ä¸­å¿ƒ(Page08-10)å’ŒæŠ€èƒ½æœåŠ¡(Page11-12)å®Œæ•´Mockå®ç°
- æ›´æ–° BFF æ¨¡å—çŠ¶æ€ä¸ºã€ŒMockå®Œæˆ(5æ¨¡å—)ã€
- æ–°å¢å¾…å®ç° RPC æ¥å£æ¸…å•
- æ˜ç¡®ä¸‹ä¸€æ­¥ RPC é›†æˆä¼˜å…ˆçº§
