# 模块快速理解文档编写模板

> 本模板用于统一项目中所有微服务模块的快速理解文档风格。
> 目标：让新人 5 分钟内理解模块核心职责和技术要点。

---

## 📋 文档命名规范
```
快速理解.md  (放在模块根目录)
```

---

## 📐 文档结构（8 个固定章节）

### 1️⃣ 核心定位
**目的**：一句话说清楚模块是什么
**模板**：
```markdown
## 📌 核心定位
[模块中文名] [核心职责描述]，基于 Spring Cloud 微服务架构。

**本模块职责**：[是否连接数据库 / 提供什么服务 / 调用哪些服务]
```

**示例**：
```markdown
## 📌 核心定位
向娱拍 App 用户认证授权服务，基于 Spring Cloud 微服务架构。

**本模块职责**：提供认证 API，不直接连接数据库，通过 Dubbo RPC 调用 `xypai-user` 服务获取用户数据。
```

**要点**：
- ✅ 明确说明是否连接数据库
- ✅ 说明与其他服务的关系
- ❌ 不要写太多背景信息

---

### 2️⃣ 主要功能
**目的**：列出 3-7 个核心功能点
**模板**：
```markdown
## 🎯 主要功能
- **功能 1**：简短描述
- **功能 2**：简短描述
- **功能 3**：简短描述
```

**示例**：
```markdown
## 🎯 主要功能
- **SMS 登录**：验证码登录 + 自动注册
- **密码登录**：手机号/邮箱 + 密码
- **忘记密码**：短信验证 → 重置密码
- **支付密码**：设置、修改、验证支付密码
- **Token 管理**：JWT token 签发、刷新、登出
```

**要点**：
- ✅ 每条控制在 10 字以内
- ✅ 使用箭头（→）表示流程
- ✅ 使用加号（+）表示附带功能
- ❌ 不要写实现细节

---

### 3️⃣ 技术栈
**目的**：列出核心技术组件
**模板**：
```markdown
## 🏗️ 技术栈
\```
Spring Boot 3.x + [核心框架] + [核心框架]
[存储中间件] ([用途说明])
\```
```

**示例**：
```markdown
## 🏗️ 技术栈
\```
Spring Boot 3.x + Sa-Token + Nacos + Dubbo RPC
Redis (验证码缓存 + Token 存储)
\```
```

**要点**：
- ✅ 只列出核心技术（不超过 5 个）
- ✅ 中间件要说明用途
- ❌ 不要列出通用依赖（如 Lombok、Jackson）

---

### 4️⃣ 核心目录结构
**目的**：展示代码组织方式
**模板**：
```markdown
## 📁 核心目录结构
\```
模块名/
├── controller/      # [说明]
│   ├── XxxController.java    # [说明]
│   └── YyyController.java    # [说明]
├── service/         # [说明]
│   └── impl/
│       └── XxxService.java   # [说明]
└── domain/
    ├── dto/         # 请求 DTO
    └── vo/          # 响应 VO
\```
```

**要点**：
- ✅ 只展示 2-3 层深度
- ✅ 列出 3-5 个关键文件即可
- ✅ 标注特殊说明（如"无 XML"、"通过 Dubbo 调用"）
- ❌ 不要列出所有文件

---

### 5️⃣ 核心接口（可选，仅 API 服务需要）
**目的**：列出最重要的 5-10 个接口
**模板**：
```markdown
## 🔑 核心接口
| 接口 | 说明 | 特殊字段 |
|------|------|----------|
| \`POST /xxx\` | [功能说明] | [重要字段/返回值] |
| \`GET /yyy\` | [功能说明] | - |
```

**示例**：
```markdown
## 🔑 核心接口
| 接口 | 说明 | 特殊字段 |
|------|------|----------|
| \`POST /auth/login/sms\` | 验证码登录 | \`isNewUser\` 标识是否新用户 |
| \`POST /auth/login/password\` | 密码登录 | - |
```

**要点**：
- ✅ 只列核心接口（不超过 10 个）
- ✅ "特殊字段"列说明前端需要关注的字段
- ❌ 不要写完整的请求/响应示例

---

### 6️⃣ 微服务架构（如有依赖其他服务）
**目的**：画出调用链路
**模板**：
```markdown
## 🏛️ 微服务架构
\```
┌─────────────────┐
│  本模块         │  ← [说明]
└────────┬────────┘
         │ [调用方式]
         ↓
┌─────────────────┐
│  依赖服务       │  ← [说明]
└────────┬────────┘
         │ [调用方式]
         ↓
┌─────────────────┐
│  数据源         │  ← [说明]
└─────────────────┘
\```
```

**要点**：
- ✅ 使用 ASCII 图展示层级关系
- ✅ 标注调用方式（Dubbo RPC / HTTP / MyBatis Plus）
- ❌ 不要画太复杂的图（最多 3 层）

---

### 7️⃣ 技术亮点
**目的**：列出 3-5 个技术特色
**模板**：
```markdown
## 🔥 技术亮点
1. **[亮点名称]**：[一句话说明]
2. **[亮点名称]**：[一句话说明]
3. **[亮点名称]**：[一句话说明]
```

**示例**：
```markdown
## 🔥 技术亮点
1. **微服务解耦**：认证服务与用户数据服务分离，本模块不直接连接数据库
2. **策略模式**：每种登录方式独立策略类（SMS、密码、社交登录等）
3. **Dubbo RPC**：通过 \`RemoteAppUserService\` 远程调用用户服务
```

**要点**：
- ✅ 聚焦架构设计、设计模式、性能优化
- ❌ 不要写常规功能

---

### 8️⃣ 快速启动
**目的**：提供最简启动步骤
**模板**：
```markdown
## 🚀 快速启动
\```bash
# 1. 确保依赖服务已启动
#    - [服务 1]（[说明]）
#    - [服务 2]（[说明]）

# 2. 启动本服务
cd [模块名]
mvn clean package -DskipTests
java -jar target/[模块名].jar

# 默认端口：[端口号]
# Swagger UI: http://localhost:[端口]/doc.html
\```
```

**要点**：
- ✅ 列出必须的依赖服务
- ✅ 写清楚默认端口
- ❌ 不要写复杂的配置步骤

---

### 9️⃣ 注意事项
**目的**：列出重要提醒（3-7 条）
**模板**：
```markdown
## 📌 注意事项
- **[关键点]**：[说明]
- [其他注意点]
- [其他注意点]
```

**示例**：
```markdown
## 📌 注意事项
- **无数据库连接**：本模块不直接连接数据库，所有用户数据操作通过 Dubbo RPC 调用 \`xypai-user\` 服务
- **依赖服务**：必须先启动 Nacos、Redis、xypai-user 服务，否则无法正常工作
- SMS 验证码依赖 Redis，60 秒有效期
```

**要点**：
- ✅ 第一条写最重要的（用加粗）
- ✅ 包含：依赖关系、数据库、缓存、安全、数据格式
- ❌ 不要写太细节的配置

---

## ✅ 编写原则（重要！）

### 1. 精简至上
- 每个章节不超过 15 行
- 整个文档不超过 100 行
- 能用表格就不用段落
- 能用列表就不用表格

### 2. 避免冗余
- ❌ 不要写"背景介绍"
- ❌ 不要写"技术选型理由"
- ❌ 不要复制粘贴接口文档
- ❌ 不要写详细配置说明
- ✅ 只写"是什么"和"怎么用"

### 3. 突出重点
- 用 **加粗** 标注关键词
- 用 `代码块` 标注技术术语
- 用 emoji 让章节更易识别
- 第一条注意事项用加粗

### 4. 面向新人
- 假设读者不了解项目
- 假设读者了解 Spring Boot
- 用简单直白的语言
- 避免行业黑话

---

## 🎯 检查清单

写完文档后，检查以下项：

- [ ] 文档总行数 ≤ 110 行
- [ ] 每章节都有 emoji 标识
- [ ] "核心定位"说明了是否连接数据库
- [ ] "技术栈"不超过 5 个技术
- [ ] "目录结构"不超过 3 层深度
- [ ] "核心接口"不超过 10 个（如有）
- [ ] "架构图"不超过 3 层（如有）
- [ ] "技术亮点"有 3-5 条
- [ ] "注意事项"第一条加粗
- [ ] 通读一遍，5 分钟能读完

---

## 💡 常见问题

**Q: 模块功能很多，写不下怎么办？**
A: 只写核心功能，辅助功能可以合并（如"用户管理：增删改查"）

**Q: 是否需要写代码示例？**
A: 不需要，快速理解文档不是 API 文档

**Q: 是否需要写数据库表结构？**
A: 只在"微服务架构"章节简单标注，不要展开

**Q: 模块有多个数据库怎么办？**
A: 在"核心定位"或"架构图"中简单列出，不展开

**Q: 是否需要版本历史？**
A: 不需要，这是快速理解文档，不是 CHANGELOG

---

## 📝 完整示例参考

参考 `xypai-auth/快速理解.md` 作为标准模板。
