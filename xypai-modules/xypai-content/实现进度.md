# XyPai-Content å†…å®¹æœåŠ¡å®ç°è¿›åº¦

> **æ›´æ–°æ—¶é—´**: 2025-12-01
> **ç»´æŠ¤è€…**: XyPai å¼€å‘å›¢é˜Ÿ

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è®°å½• xypai-content (å†…å®¹æœåŠ¡) æ¨¡å—çš„å®ç°è¿›åº¦ï¼Œå¯¹åº”å‰ç«¯æ–‡æ¡£ `03-contentæ¨¡å—` ä¸­çš„å„ä¸ªé¡µé¢éœ€æ±‚ã€‚

---

## ğŸ¯ å‰ç«¯é¡µé¢ä¸åç«¯æ¥å£æ˜ å°„

### 02-å‘å¸ƒåŠ¨æ€é¡µé¢

**å‰ç«¯æ–‡æ¡£**: `XiangYuPai-Doc/Action-API/æ¨¡å—åŒ–æ¶æ„/03-contentæ¨¡å—/Frontend/02-å‘å¸ƒåŠ¨æ€é¡µé¢.md`

| æ¥å£ | åç«¯è·¯å¾„ | çŠ¶æ€ | æµ‹è¯• | è¯´æ˜ |
|------|---------|------|------|------|
| å‘å¸ƒåŠ¨æ€ | `POST /api/v1/content/publish` | âœ… å·²å®ç° | âœ… å·²æµ‹è¯• | æ”¯æŒæ–‡å­—ã€å›¾ç‰‡ã€è§†é¢‘ã€è¯é¢˜ã€åœ°ç‚¹ |
| è·å–çƒ­é—¨è¯é¢˜ | `GET /api/v1/content/topics/hot` | âœ… å·²å®ç° | âœ… å·²æµ‹è¯• | åˆ†é¡µè·å–çƒ­é—¨è¯é¢˜ |
| æœç´¢è¯é¢˜ | `GET /api/v1/content/topics/search` | âœ… å·²å®ç° | âœ… å·²æµ‹è¯• | æ”¯æŒå…³é”®è¯æœç´¢ |
| è·å–å‘å¸ƒé…ç½® | `GET /api/v1/content/publish/config` | âœ… å·²å®ç° | ğŸ”œ å¾…æµ‹è¯• | è¿”å›å‘å¸ƒé™åˆ¶é…ç½® |
| è·å–è¯é¢˜åˆ†ç±» | `GET /api/v1/content/publish/topic-categories` | âœ… å·²å®ç° | ğŸ”œ å¾…æµ‹è¯• | æŒ‰åˆ†ç±»è·å–è¯é¢˜ |
| ä¿å­˜è‰ç¨¿ | `POST /api/v1/content/publish/draft` | âœ… å·²å®ç° | ğŸ”œ å¾…æµ‹è¯• | ä¿å­˜/æ›´æ–°è‰ç¨¿ |
| è·å–è‰ç¨¿åˆ—è¡¨ | `GET /api/v1/content/publish/drafts` | âœ… å·²å®ç° | ğŸ”œ å¾…æµ‹è¯• | è·å–ç”¨æˆ·è‰ç¨¿ |
| è·å–è‰ç¨¿è¯¦æƒ… | `GET /api/v1/content/publish/draft/{id}` | âœ… å·²å®ç° | ğŸ”œ å¾…æµ‹è¯• | è·å–è‰ç¨¿è¯¦æƒ… |
| åˆ é™¤è‰ç¨¿ | `DELETE /api/v1/content/publish/draft/{id}` | âœ… å·²å®ç° | ğŸ”œ å¾…æµ‹è¯• | åˆ é™¤æŒ‡å®šè‰ç¨¿ |
| ä¸Šä¼ å›¾ç‰‡ | `POST /api/v1/media/upload` | âš ï¸ xypai-common | ğŸ”œ å¾…æµ‹è¯• | éœ€è¦ xypai-common æ¨¡å—å®ç° |
| ä¸Šä¼ è§†é¢‘ | `POST /api/v1/media/upload` | âš ï¸ xypai-common | ğŸ”œ å¾…æµ‹è¯• | éœ€è¦ xypai-common æ¨¡å—å®ç° |
| è·å–é™„è¿‘åœ°ç‚¹ | `GET /api/v1/location/nearby` | âš ï¸ xypai-common | ğŸ”œ å¾…æµ‹è¯• | éœ€è¦ xypai-common æ¨¡å—å®ç° |
| æœç´¢åœ°ç‚¹ | `GET /api/v1/location/search` | âš ï¸ xypai-common | ğŸ”œ å¾…æµ‹è¯• | éœ€è¦ xypai-common æ¨¡å—å®ç° |

**æµ‹è¯•æ–‡ä»¶**: [ContentPublishTest.java](./src/test/java/org/dromara/content/ContentPublishTest.java)

**æµ‹è¯•è¦†ç›–**:
- âœ… å‘å¸ƒçº¯æ–‡å­—åŠ¨æ€
- âœ… å‘å¸ƒå¸¦æ ‡é¢˜çš„åŠ¨æ€
- âœ… å‘å¸ƒå¸¦è¯é¢˜çš„åŠ¨æ€
- âœ… å‘å¸ƒå¸¦åœ°ç‚¹çš„åŠ¨æ€
- âœ… è·å–çƒ­é—¨è¯é¢˜åˆ—è¡¨
- âœ… æœç´¢è¯é¢˜
- âœ… å†…å®¹éªŒè¯ï¼ˆç©ºå†…å®¹ã€è¶…é•¿å†…å®¹ï¼‰
- âœ… è¯é¢˜éªŒè¯ï¼ˆè¶…è¿‡5ä¸ªè¯é¢˜ï¼‰

---

### 01-å‘ç°ä¸»é¡µé¡µé¢

**å‰ç«¯æ–‡æ¡£**: `XiangYuPai-Doc/Action-API/æ¨¡å—åŒ–æ¶æ„/03-contentæ¨¡å—/Frontend/01-å‘ç°ä¸»é¡µé¡µé¢.md`

| æ¥å£ | åç«¯è·¯å¾„ | çŠ¶æ€ | æµ‹è¯• | è¯´æ˜ |
|------|---------|------|------|------|
| å…³æ³¨Tab | `GET /api/v1/content/feed/following` | âœ… å·²å®ç° | ğŸ”œ å¾…æµ‹è¯• | æ—¶é—´å€’åºæ’åˆ— |
| çƒ­é—¨Tab | `GET /api/v1/content/feed/hot` | âœ… å·²å®ç° | ğŸ”œ å¾…æµ‹è¯• | çƒ­åº¦ç®—æ³•æ’åº |
| åŒåŸTab | `GET /api/v1/content/feed/nearby` | âœ… å·²å®ç° | ğŸ”œ å¾…æµ‹è¯• | åŸºäºç»çº¬åº¦çš„ç©ºé—´æŸ¥è¯¢ |
| åŠ¨æ€è¯¦æƒ… | `GET /api/v1/content/detail/{feedId}` | âœ… å·²å®ç° | ğŸ”œ å¾…æµ‹è¯• | è·å–å®Œæ•´åŠ¨æ€ä¿¡æ¯ |
| åˆ é™¤åŠ¨æ€ | `DELETE /api/v1/content/{feedId}` | âœ… å·²å®ç° | ğŸ”œ å¾…æµ‹è¯• | ä»…ä½œè€…å¯åˆ é™¤ |

**æµ‹è¯•æ–‡ä»¶**: ğŸ”œ å¾…åˆ›å»º `DiscoveryFeedTest.java`

---

### 03-åŠ¨æ€è¯¦æƒ…é¡µé¢

**å‰ç«¯æ–‡æ¡£**: `XiangYuPai-Doc/Action-API/æ¨¡å—åŒ–æ¶æ„/03-contentæ¨¡å—/Frontend/03-åŠ¨æ€è¯¦æƒ…é¡µé¢.md`

| æ¥å£ | åç«¯è·¯å¾„ | çŠ¶æ€ | æµ‹è¯• | è¯´æ˜ |
|------|---------|------|------|------|
| è·å–åŠ¨æ€è¯¦æƒ… | `GET /api/v1/content/detail/{feedId}` | âœ… å·²å®ç° | ğŸ”œ å¾…æµ‹è¯• | åŒ…å«ä½œè€…ä¿¡æ¯ã€è¯„è®ºåˆ—è¡¨ |
| ç‚¹èµåŠ¨æ€ | `POST /api/v1/content/like/{feedId}` | âœ… å·²å®ç° | ğŸ”œ å¾…æµ‹è¯• | å¹‚ç­‰æ€§å¤„ç† |
| æ”¶è—åŠ¨æ€ | `POST /api/v1/content/collect/{feedId}` | âœ… å·²å®ç° | ğŸ”œ å¾…æµ‹è¯• | - |
| åˆ†äº«åŠ¨æ€ | `POST /api/v1/content/share/{feedId}` | âœ… å·²å®ç° | ğŸ”œ å¾…æµ‹è¯• | åˆ†äº«è®¡æ•°+1 |
| å‘è¡¨è¯„è®º | `POST /api/v1/content/comment` | âœ… å·²å®ç° | ğŸ”œ å¾…æµ‹è¯• | æ”¯æŒä¸€çº§/äºŒçº§è¯„è®º |
| è¯„è®ºåˆ—è¡¨ | `GET /api/v1/content/comment/{feedId}` | âœ… å·²å®ç° | ğŸ”œ å¾…æµ‹è¯• | æ ‘å½¢ç»“æ„ |
| åˆ é™¤è¯„è®º | `DELETE /api/v1/content/comment/{id}` | âœ… å·²å®ç° | ğŸ”œ å¾…æµ‹è¯• | ä»…ä½œè€…å¯åˆ é™¤ |
| ç½®é¡¶è¯„è®º | `PUT /api/v1/content/comment/{id}/pin` | âœ… å·²å®ç° | ğŸ”œ å¾…æµ‹è¯• | ä»…åŠ¨æ€ä½œè€…å¯æ“ä½œ |

**æµ‹è¯•æ–‡ä»¶**: ğŸ”œ å¾…åˆ›å»º `FeedDetailTest.java`

---

### 04-è¯é¢˜è¯¦æƒ…é¡µé¢

**å‰ç«¯æ–‡æ¡£**: `XiangYuPai-Doc/Action-API/æ¨¡å—åŒ–æ¶æ„/03-contentæ¨¡å—/Frontend/04-è¯é¢˜è¯¦æƒ…é¡µé¢.md`

| æ¥å£ | åç«¯è·¯å¾„ | çŠ¶æ€ | æµ‹è¯• | è¯´æ˜ |
|------|---------|------|------|------|
| è¯é¢˜ä¸‹çš„åŠ¨æ€ | `GET /api/v1/content/topic/{id}/feeds` | âœ… å·²å®ç° | ğŸ”œ å¾…æµ‹è¯• | æ—¶é—´å€’åº |
| è¯é¢˜è¯¦æƒ… | `GET /api/v1/content/topic/{id}` | ğŸ”œ å¾…å®ç° | âŒ æœªæµ‹è¯• | è¯é¢˜åŸºæœ¬ä¿¡æ¯ã€ç»Ÿè®¡æ•°æ® |
| å…³æ³¨è¯é¢˜ | `POST /api/v1/content/topic/{id}/follow` | ğŸ”œ å¾…å®ç° | âŒ æœªæµ‹è¯• | - |

**æµ‹è¯•æ–‡ä»¶**: ğŸ”œ å¾…åˆ›å»º `TopicDetailTest.java`

---

## ğŸ“Š æ•´ä½“å®ç°è¿›åº¦

### Controller å±‚

| Controller | æ–‡ä»¶è·¯å¾„ | çŠ¶æ€ | è¯´æ˜ |
|-----------|---------|------|------|
| FeedController | [FeedController.java](./src/main/java/org/dromara/content/controller/FeedController.java) | âœ… å·²å®Œæˆ | åŠ¨æ€å‘å¸ƒã€æŸ¥è¯¢ã€åˆ é™¤ |
| CommentController | [CommentController.java](./src/main/java/org/dromara/content/controller/CommentController.java) | âœ… å·²å®Œæˆ | è¯„è®ºç³»ç»Ÿ |
| TopicController | [TopicController.java](./src/main/java/org/dromara/content/controller/TopicController.java) | âš ï¸ éƒ¨åˆ†å®Œæˆ | çƒ­é—¨è¯é¢˜ã€æœç´¢å·²å®ç°ï¼Œè¯é¢˜å…³æ³¨å¾…å®ç° |
| InteractionController | [InteractionController.java](./src/main/java/org/dromara/content/controller/InteractionController.java) | âœ… å·²å®Œæˆ | ç‚¹èµã€æ”¶è—ã€åˆ†äº« |
| ReportController | [ReportController.java](./src/main/java/org/dromara/content/controller/ReportController.java) | âœ… å·²å®Œæˆ | ä¸¾æŠ¥åŠŸèƒ½ |
| PublishController | [PublishController.java](./src/main/java/org/dromara/content/controller/PublishController.java) | âœ… å·²å®Œæˆ | å‘å¸ƒé…ç½®ã€è¯é¢˜åˆ†ç±»ã€è‰ç¨¿ç®¡ç† |

### Service å±‚

| Service | æ–‡ä»¶è·¯å¾„ | çŠ¶æ€ | è¯´æ˜ |
|---------|---------|------|------|
| IFeedService | [service/IFeedService.java](./src/main/java/org/dromara/content/service/IFeedService.java) | âœ… å·²å®Œæˆ | åŒ…å«æ¨èç®—æ³• |
| ICommentService | [service/ICommentService.java](./src/main/java/org/dromara/content/service/ICommentService.java) | âœ… å·²å®Œæˆ | æ ‘å½¢ç»“æ„å¤„ç† |
| ITopicService | [service/ITopicService.java](./src/main/java/org/dromara/content/service/ITopicService.java) | âš ï¸ éƒ¨åˆ†å®Œæˆ | çƒ­åº¦æ’åºå·²å®ç° |
| IInteractionService | [service/IInteractionService.java](./src/main/java/org/dromara/content/service/IInteractionService.java) | âœ… å·²å®Œæˆ | ç»Ÿè®¡æ›´æ–° |
| IReportService | [service/IReportService.java](./src/main/java/org/dromara/content/service/IReportService.java) | âœ… å·²å®Œæˆ | å®¡æ ¸æµç¨‹ |
| IPublishService | [service/IPublishService.java](./src/main/java/org/dromara/content/service/IPublishService.java) | âœ… å·²å®Œæˆ | å‘å¸ƒé…ç½®ã€è¯é¢˜åˆ†ç±» |
| IFeedDraftService | [service/IFeedDraftService.java](./src/main/java/org/dromara/content/service/IFeedDraftService.java) | âœ… å·²å®Œæˆ | è‰ç¨¿ç®¡ç† |

### Domain å±‚

| ç±»å‹ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| Entity (12å¼ è¡¨) | âœ… å·²å®Œæˆ | Feed, FeedMedia, FeedTopic, Comment, Like, ContentCollection, Share, Topic, Report, TopicCategory, FeedDraft, PublishConfig |
| DTO | âœ… å·²å®Œæˆ | FeedPublishDTO, FeedListQueryDTO, FeedDraftDTO ç­‰ |
| VO | âœ… å·²å®Œæˆ | FeedDetailVO, FeedListVO, TopicListVO, TopicCategoryVO, FeedDraftVO, PublishConfigVO ç­‰ |

### Mapper å±‚

| Mapper | çŠ¶æ€ | è¯´æ˜ |
|--------|------|------|
| FeedMapper | âœ… å·²å®Œæˆ | MyBatis Plus |
| CommentMapper | âœ… å·²å®Œæˆ | MyBatis Plus |
| TopicMapper | âœ… å·²å®Œæˆ | MyBatis Plus |
| LikeMapper | âœ… å·²å®Œæˆ | MyBatis Plus |
| CollectionMapper | âœ… å·²å®Œæˆ | MyBatis Plus |
| ShareMapper | âœ… å·²å®Œæˆ | MyBatis Plus |
| FeedMediaMapper | âœ… å·²å®Œæˆ | MyBatis Plus |
| FeedTopicMapper | âœ… å·²å®Œæˆ | MyBatis Plus |
| ReportMapper | âœ… å·²å®Œæˆ | MyBatis Plus |
| TopicCategoryMapper | âœ… å·²å®Œæˆ | MyBatis Plus |
| FeedDraftMapper | âœ… å·²å®Œæˆ | MyBatis Plus |
| PublishConfigMapper | âœ… å·²å®Œæˆ | MyBatis Plus |

---

## ğŸ§ª æµ‹è¯•è¿›åº¦

### å·²å®Œæˆæµ‹è¯•

| æµ‹è¯•æ–‡ä»¶ | è¦†ç›–åŠŸèƒ½ | çŠ¶æ€ |
|---------|---------|------|
| [ContentPublishTest.java](./src/test/java/org/dromara/content/ContentPublishTest.java) | å‘å¸ƒåŠ¨æ€ã€è¯é¢˜æŸ¥è¯¢ | âœ… å·²å®Œæˆ |

### å¾…åˆ›å»ºæµ‹è¯•

| æµ‹è¯•æ–‡ä»¶ | è¦†ç›–åŠŸèƒ½ | ä¼˜å…ˆçº§ |
|---------|---------|--------|
| DiscoveryFeedTest.java | å‘ç°ä¸»é¡µ Feed æµ | ğŸ”¥ é«˜ |
| FeedDetailTest.java | åŠ¨æ€è¯¦æƒ…ã€è¯„è®ºã€äº’åŠ¨ | ğŸ”¥ é«˜ |
| TopicDetailTest.java | è¯é¢˜è¯¦æƒ…ã€è¯é¢˜å…³æ³¨ | ğŸ“¦ ä¸­ |
| FeedInteractionTest.java | ç‚¹èµã€æ”¶è—ã€åˆ†äº« | ğŸ“¦ ä¸­ |
| CommentTest.java | è¯„è®ºç³»ç»Ÿå®Œæ•´æµ‹è¯• | ğŸ“¦ ä¸­ |
| ReportTest.java | ä¸¾æŠ¥åŠŸèƒ½ | ğŸ“¦ ä½ |

---

## âœ… å·²å®ç°åŠŸèƒ½æ¸…å•

### 1. å‘å¸ƒåŠ¨æ€ (02-å‘å¸ƒåŠ¨æ€é¡µé¢)

âœ… **æ ¸å¿ƒåŠŸèƒ½**:
- å‘å¸ƒçº¯æ–‡å­—åŠ¨æ€
- å‘å¸ƒå¸¦æ ‡é¢˜çš„åŠ¨æ€
- å‘å¸ƒå¸¦å›¾ç‰‡çš„åŠ¨æ€ (åª’ä½“IDå…³è”)
- å‘å¸ƒå¸¦è§†é¢‘çš„åŠ¨æ€ (åª’ä½“IDå…³è”)
- å‘å¸ƒå¸¦è¯é¢˜çš„åŠ¨æ€ (æœ€å¤š5ä¸ª)
- å‘å¸ƒå¸¦åœ°ç‚¹çš„åŠ¨æ€ (ç»çº¬åº¦ + åœ°ç‚¹ä¿¡æ¯)
- å¯è§èŒƒå›´è®¾ç½® (å…¬å¼€/ä»…å¥½å‹/ä»…è‡ªå·±)

âœ… **éªŒè¯è§„åˆ™**:
- å†…å®¹å¿…å¡«ï¼Œ1-1000å­—ç¬¦
- æ ‡é¢˜å¯é€‰ï¼Œæœ€å¤š50å­—ç¬¦
- åª’ä½“IDæœ€å¤š9ä¸ª (å›¾ç‰‡æˆ–1ä¸ªè§†é¢‘)
- è¯é¢˜æœ€å¤š5ä¸ªï¼Œæ¯ä¸ª1-20å­—ç¬¦
- ç”¨æˆ·ç™»å½•éªŒè¯
- é™æµä¿æŠ¤ (æ¯ç”¨æˆ·æ¯åˆ†é’Ÿ10æ¬¡)

âœ… **è¯é¢˜åŠŸèƒ½**:
- è·å–çƒ­é—¨è¯é¢˜åˆ—è¡¨ (åˆ†é¡µ)
- æœç´¢è¯é¢˜ (å…³é”®è¯æœç´¢)
- è¯é¢˜çƒ­åº¦æ’åº

### 2. Feed æµæŸ¥è¯¢ (01-å‘ç°ä¸»é¡µé¡µé¢)

âœ… **ä¸‰ç§ Tab**:
- å…³æ³¨ Tab (`/feed/following`) - æ—¶é—´å€’åº
- çƒ­é—¨ Tab (`/feed/hot`) - çƒ­åº¦ç®—æ³•æ’åº
- åŒåŸ Tab (`/feed/nearby`) - ç©ºé—´æŸ¥è¯¢

âœ… **æ ¸å¿ƒåŠŸèƒ½**:
- åˆ†é¡µæŸ¥è¯¢
- è·å–åŠ¨æ€è¯¦æƒ…
- åˆ é™¤åŠ¨æ€ (ä»…ä½œè€…)
- çº§è”åˆ é™¤ (è¯„è®ºã€ç‚¹èµç­‰)

### 3. è¯„è®ºç³»ç»Ÿ

âœ… **æ ¸å¿ƒåŠŸèƒ½**:
- å‘è¡¨ä¸€çº§è¯„è®º
- å‘è¡¨äºŒçº§å›å¤
- è¯„è®ºåˆ—è¡¨ (æ ‘å½¢ç»“æ„)
- åˆ é™¤è¯„è®º (ä»…ä½œè€…)
- ç½®é¡¶è¯„è®º (ä»…åŠ¨æ€ä½œè€…)
- ç‚¹èµè¯„è®º

âœ… **ç‰¹æ€§**:
- äºŒçº§è¯„è®ºå‰3æ¡è‡ªåŠ¨å±•å¼€
- çº§è”åˆ é™¤äºŒçº§å›å¤

### 4. äº’åŠ¨åŠŸèƒ½

âœ… **æ ¸å¿ƒåŠŸèƒ½**:
- ç‚¹èµåŠ¨æ€ (å¹‚ç­‰æ€§å¤„ç†)
- æ”¶è—åŠ¨æ€
- åˆ†äº«åŠ¨æ€ (è®¡æ•°+1)
- æˆ‘çš„ç‚¹èµåˆ—è¡¨
- æˆ‘çš„æ”¶è—åˆ—è¡¨

âœ… **ç‰¹æ€§**:
- Redis + å”¯ä¸€ç´¢å¼•é˜²é‡å¤
- å®æ—¶ç»Ÿè®¡æ›´æ–°

### 5. ä¸¾æŠ¥åŠŸèƒ½

âœ… **æ ¸å¿ƒåŠŸèƒ½**:
- ä¸¾æŠ¥åŠ¨æ€
- ä¸¾æŠ¥è¯„è®º
- å®¡æ ¸æµç¨‹

---

## ğŸ”œ å¾…å®ç°åŠŸèƒ½

### 1. è¯é¢˜å…³æ³¨åŠŸèƒ½

| åŠŸèƒ½ | çŠ¶æ€ | ä¼˜å…ˆçº§ |
|------|------|--------|
| å…³æ³¨è¯é¢˜ | ğŸ”œ å¾…å®ç° | ğŸ“¦ ä¸­ |
| å–æ¶ˆå…³æ³¨è¯é¢˜ | ğŸ”œ å¾…å®ç° | ğŸ“¦ ä¸­ |
| æˆ‘çš„å…³æ³¨è¯é¢˜åˆ—è¡¨ | ğŸ”œ å¾…å®ç° | ğŸ“¦ ä¸­ |
| è¯é¢˜è¯¦æƒ…æ¥å£ | ğŸ”œ å¾…å®ç° | ğŸ“¦ ä¸­ |

### 2. Elasticsearch æœç´¢ (å¯é€‰)

| åŠŸèƒ½ | çŠ¶æ€ | ä¼˜å…ˆçº§ |
|------|------|--------|
| Feed å†…å®¹å…¨æ–‡æœç´¢ | ğŸ”œ å¾…å®ç° | ğŸ“¦ ä½ |
| è¯é¢˜å…¨æ–‡æœç´¢ | ğŸ”œ å¾…å®ç° | ğŸ“¦ ä½ |
| æœç´¢ç´¢å¼•åŒæ­¥ | ğŸ”œ å¾…å®ç° | ğŸ“¦ ä½ |

---

## ğŸ”— ç›¸å…³æ¨¡å—ä¾èµ–

### xypai-common æ¨¡å—éœ€è¦æä¾›çš„åŠŸèƒ½

| åŠŸèƒ½ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| åª’ä½“ä¸Šä¼  (å›¾ç‰‡) | âš ï¸ å¾…ç¡®è®¤ | `POST /api/v1/media/upload` |
| åª’ä½“ä¸Šä¼  (è§†é¢‘) | âš ï¸ å¾…ç¡®è®¤ | `POST /api/v1/media/upload` |
| è·å–é™„è¿‘åœ°ç‚¹ | âš ï¸ å¾…ç¡®è®¤ | `GET /api/v1/location/nearby` |
| æœç´¢åœ°ç‚¹ | âš ï¸ å¾…ç¡®è®¤ | `GET /api/v1/location/search` |

### xypai-user æ¨¡å—éœ€è¦æä¾›çš„åŠŸèƒ½

| åŠŸèƒ½ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| æ‰¹é‡è·å–ç”¨æˆ·ä¿¡æ¯ | âš ï¸ å¾…ç¡®è®¤ | ç”¨äº Feed æµå±•ç¤ºä½œè€…ä¿¡æ¯ |
| å…³æ³¨å…³ç³»æŸ¥è¯¢ | âš ï¸ å¾…ç¡®è®¤ | ç”¨äºåˆ¤æ–­æ˜¯å¦å…³æ³¨åŠ¨æ€ä½œè€… |

---

## ğŸ“ æ¥å£è§„èŒƒ

### è¯·æ±‚æ ¼å¼

æ‰€æœ‰æ¥å£ä½¿ç”¨ JSON æ ¼å¼è¯·æ±‚ï¼š
```json
{
  "type": 1,
  "content": "åŠ¨æ€å†…å®¹",
  "topicNames": ["è¯é¢˜1", "è¯é¢˜2"]
}
```

### å“åº”æ ¼å¼

ç»Ÿä¸€ä½¿ç”¨ `R<T>` æ ¼å¼ï¼š
```json
{
  "code": 200,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": { ... }
}
```

### è®¤è¯æ–¹å¼

ä½¿ç”¨ Sa-Token è¿›è¡Œè®¤è¯ï¼š
```
Authorization: Bearer {token}
```

### é™æµè§„åˆ™

- IP é™æµ: æ¯åˆ†é’Ÿ100æ¬¡ (æŸ¥è¯¢æ¥å£)
- ç”¨æˆ·é™æµ: æ¯åˆ†é’Ÿ10æ¬¡ (å‘å¸ƒæ¥å£)
- ç”¨æˆ·é™æµ: æ¯åˆ†é’Ÿ20æ¬¡ (åˆ é™¤æ¥å£)

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨æµ‹è¯•

### 1. å¯åŠ¨å¿…éœ€æœåŠ¡

```bash
# 1. Nacos (æœåŠ¡æ³¨å†Œä¸­å¿ƒ)
# 2. MySQL (xypai_content æ•°æ®åº“)
# 3. Redis (ç¼“å­˜)
# 4. Gateway (8080)
# 5. xypai-auth (8200)
# 6. xypai-content (9403)
```

### 2. è¿è¡Œæµ‹è¯•

```bash
cd xypai-modules/xypai-content
mvn test -Dtest=ContentPublishTest
```

### 3. æŸ¥çœ‹ç»“æœ

æµ‹è¯•æ—¥å¿—ä¼šæ˜¾ç¤ºæ¯ä¸ªæµ‹è¯•æ­¥éª¤çš„æ‰§è¡Œç»“æœï¼š
- âœ… æˆåŠŸ: ç»¿è‰²æ—¥å¿—
- âš ï¸ è­¦å‘Š: é»„è‰²æ—¥å¿— (æœåŠ¡æœªå¯åŠ¨ç­‰)
- âŒ å¤±è´¥: çº¢è‰²æ—¥å¿—

---

## ğŸ“Œ æ³¨æ„äº‹é¡¹

1. **åª’ä½“ä¸Šä¼ **: å‰ç«¯éœ€è¦å…ˆè°ƒç”¨ xypai-common çš„åª’ä½“ä¸Šä¼ æ¥å£ï¼Œè·å– mediaId åå†è°ƒç”¨å‘å¸ƒæ¥å£
2. **åœ°ç‚¹é€‰æ‹©**: å‰ç«¯éœ€è¦å…ˆè°ƒç”¨ xypai-common çš„åœ°ç‚¹æŸ¥è¯¢æ¥å£ï¼Œè·å–åœ°ç‚¹ä¿¡æ¯åå†è°ƒç”¨å‘å¸ƒæ¥å£
3. **è¯é¢˜åˆ›å»º**: å¦‚æœè¯é¢˜ä¸å­˜åœ¨ï¼Œå‘å¸ƒæ—¶ä¼šè‡ªåŠ¨åˆ›å»º
4. **çƒ­åº¦è®¡ç®—**: çƒ­åº¦åˆ†æ•°æ¯5åˆ†é’Ÿå¼‚æ­¥è®¡ç®—ä¸€æ¬¡ (å®šæ—¶ä»»åŠ¡ + Redis)
5. **ç©ºé—´æŸ¥è¯¢**: åŒåŸTabéœ€è¦ç”¨æˆ·æä¾›ç»çº¬åº¦åæ ‡
6. **Elasticsearch**: æœç´¢åŠŸèƒ½ä¸ºå¯é€‰æ¨¡å—ï¼Œä¸å½±å“æ ¸å¿ƒåŠŸèƒ½

---

## ğŸ“– ç›¸å…³æ–‡æ¡£

- [xypai-content å¿«é€Ÿç†è§£](./å¿«é€Ÿç†è§£.md)
- [å‘å¨±æ‹å¹³å°æ¶æ„æ€»è§ˆ](../../å‘å¨±æ‹å¹³å°æ¶æ„æ€»è§ˆ.md)
- [å‰ç«¯APIæ–‡æ¡£ - 02-å‘å¸ƒåŠ¨æ€é¡µé¢](../../../XiangYuPai-Doc/Action-API/æ¨¡å—åŒ–æ¶æ„/03-contentæ¨¡å—/Frontend/02-å‘å¸ƒåŠ¨æ€é¡µé¢.md)
- [å‰ç«¯APIæ–‡æ¡£ - 01-å‘ç°ä¸»é¡µé¡µé¢](../../../XiangYuPai-Doc/Action-API/æ¨¡å—åŒ–æ¶æ„/03-contentæ¨¡å—/Frontend/01-å‘ç°ä¸»é¡µé¡µé¢.md)

---

**æœ€åæ›´æ–°**: 2025-12-01
**æ›´æ–°å†…å®¹**:
- æ–°å¢å‘å¸ƒé…ç½®API (`GET /api/v1/content/publish/config`)
- æ–°å¢è¯é¢˜åˆ†ç±»API (`GET /api/v1/content/publish/topic-categories`)
- æ–°å¢è‰ç¨¿ç®¡ç†API (CRUDæ¥å£)
- æ–°å¢æ•°æ®åº“è¡¨: topic_category, feed_draft, publish_config
- æ–°å¢å®ä½“ç±»ã€Mapperã€Serviceã€Controller
